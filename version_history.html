<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detailed Version Log - Tonys Onvif-RTSP Server</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg: #0b0f1a;
            --surface: #161e2d;
            --surface-hover: #1e293b;
            --accent: #38bdf8;
            --accent-soft: rgba(56, 189, 248, 0.1);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-dim: #64748b;
            --border: #1e293b;
            --success: #10b981;
            --warning: #fbbf24;
            --danger: #ef4444;
        }

        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 900px;
            width: 100%;
            padding: 40px 0;
        }

        header {
            margin-bottom: 80px;
            text-align: left;
            border-left: 4px solid var(--accent);
            padding-left: 24px;
        }

        h1 {
            font-size: 3rem;
            font-weight: 800;
            margin: 0;
            letter-spacing: -1.5px;
            line-height: 1;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
            margin-top: 15px;
            font-weight: 500;
        }

        /* Timeline Container */
        .timeline {
            position: relative;
        }

        /* Version Entry */
        .v-entry {
            margin-bottom: 100px;
            position: relative;
        }

        .v-badge {
            font-family: 'JetBrains Mono', monospace;
            color: var(--warning);
            font-weight: 800;
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: inline-block;
            background: rgba(251, 191, 36, 0.1);
            padding: 4px 12px;
            border-radius: 8px;
            border: 1px solid rgba(251, 191, 36, 0.2);
        }

        .v-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0 0 24px 0;
            color: #fff;
            letter-spacing: -0.5px;
        }

        .v-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .v-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 24px;
            height: 100%;
            transition: all 0.3s ease;
        }

        .v-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .cat-title {
            font-size: 0.75rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cat-features {
            color: var(--accent);
        }

        .cat-core {
            color: var(--success);
        }

        .cat-ui {
            color: #a855f7;
        }

        .cat-fixes {
            color: var(--danger);
        }

        ul {
            margin: 0;
            padding: 0;
            list-style: none;
        }

        li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 12px;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        li::before {
            content: "";
            position: absolute;
            left: 0;
            top: 10px;
            width: 6px;
            height: 6px;
            background: var(--text-dim);
            border-radius: 50%;
        }

        li strong {
            color: #fff;
            display: block;
            margin-bottom: 2px;
        }

        .desc-text {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        footer {
            margin-top: 100px;
            padding-top: 40px;
            border-top: 1px solid var(--border);
            text-align: center;
            color: var(--text-dim);
        }

        /* Status Pills */
        .pill {
            font-size: 0.65rem;
            padding: 2px 8px;
            border-radius: 20px;
            font-weight: 800;
            margin-left: 8px;
            vertical-align: middle;
        }

        .pill-stable {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }

            .v-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <div class="container">
        <header>
            <h1>Engineering Log</h1>
            <div class="subtitle">Detailed version history & technical breakdown.</div>
        </header>

        <div class="timeline">

            <!-- v6.0.1 -->
            <div class="v-entry">
                <span class="v-badge">v6.0.1</span> <span class="pill pill-stable">LATEST</span>
                <h2 class="v-title">GridFusion Startup Reliability</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-core">Process Management</div>
                        <ul>
                            <li>
                                <strong>Auto-Recovery Enabled</strong>
                                <span class="desc-text">Enabled `runOnInitRestart` for GridFusion streams. This ensures
                                    the matrix view automatically recovers and starts up correctly even if camera feeds
                                    are delayed during initial server boot.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v6.0 -->
            <div class="v-entry">
                <span class="v-badge">v6.0</span>
                <h2 class="v-title">Major Milestone: Stability & Polish</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-core">Core Stability</div>
                        <ul>
                            <li>
                                <strong>GridFusion Initialization Fix</strong>
                                <span class="desc-text">Resolved a critical syntax error in the FFmpeg filter complex
                                    generation that prevented the server from starting when a GridFusion stream was
                                    active.</span>
                            </li>
                            <li>
                                <strong>Configuration Logic Hardening</strong>
                                <span class="desc-text">Fixed a variable scope issue in the configuration generator that
                                    caused crashes during config saves when global authentication checks were
                                    performed.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.9.7 -->
            <div class="v-entry">
                <span class="v-badge">v5.9.7</span>
                <h2 class="v-title">Enhanced Server Controls & System Logs</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-ui">Dashboard UI</div>
                        <ul>
                            <li>
                                <strong>Consolidated Server Menu</strong>
                                <span class="desc-text">Migrated server-wide controls and system logs into a single,
                                    unified "Server" dropdown menu for a cleaner header layout.</span>
                            </li>
                            <li>
                                <strong>System Logs Integration</strong>
                                <span class="desc-text">Renamed terminal logs to "System Logs" and prioritized their
                                    visibility at the top of the server menu.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.9.5 -->
            <div class="v-entry">
                <span class="v-badge">v5.9.5</span>
                <h2 class="v-title">IP Whitelisting & Security Bypassing</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-features">IP Management</div>
                        <ul>
                            <li>
                                <strong>Whitelist Bypass</strong>
                                <span class="desc-text">Implemented IP and CIDR-range whitelisting. Authorized devices
                                    can now bypass both ONVIF and RTSP authentication for seamless integration with
                                    local NVRs.</span>
                            </li>
                            <li>
                                <strong>Live Session Monitor</strong>
                                <span class="desc-text">Added real-time connection monitoring. Displays active RTSP
                                    sessions, client IPs, and authentication status directly in the new IP Management
                                    dashboard.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.9.1 -->
            <div class="v-entry">
                <span class="v-badge">v5.9.1</span>
                <h2 class="v-title">Authentication Optimization</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-core">Auth Cache</div>
                        <ul>
                            <li>
                                <strong>Extended TTL</strong>
                                <span class="desc-text">Increased Authentication Cache TTL to 30 minutes. This
                                    significantly reduces redundant CPU overhead and log noise from repetitive NVR
                                    authentication requests.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.9 -->
            <div class="v-entry">
                <span class="v-badge">v5.9</span>
                <h2 class="v-title">Concurrency & Performance</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-core">Server Core</div>
                        <ul>
                            <li>
                                <strong>Thread Pool WSGI</strong>
                                <span class="desc-text">Replaced Flask's default threaded mode with a managed
                                    <code>ThreadPoolWSGIServer</code>. Limits resource consumption and prevents "Thread
                                    Exhaustion" crashes (fixing the 1000+ zombie thread issue).</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-features">Security</div>
                        <ul>
                            <li>
                                <strong>Auth Buffering</strong>
                                <span class="desc-text">Implemented token-based caching for SOAP UsernameToken
                                    validation. Drastically reduces the 401/200 loop overhead common in ONVIF device
                                    discovery.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.8.5 -->
            <div class="v-entry">
                <span class="v-badge">v5.8.5</span>
                <h2 class="v-title">Stability Patch</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-fixes">Bug Fixes</div>
                        <ul>
                            <li>
                                <strong>Proactive Process Cleanup</strong>
                                <span class="desc-text">Eliminated "Zombie FFmpeg" syndrome that caused 503 Service
                                    Unavailable errors after ~2 hours of continuous operation.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.8.2 -->
            <div class="v-entry">
                <span class="v-badge">v5.8.2</span>
                <h2 class="v-title">Diagnostics & Testing</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-features">RTSP Diagnostics</div>
                        <ul>
                            <li>
                                <strong>Enhanced Stream Test</strong>
                                <span class="desc-text">Upgraded the RTSP test utility with deeper FFprobe analysis,
                                    improved error reporting, and extended probe durations for slow-starting
                                    cameras.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.8 -->
            <div class="v-entry">
                <span class="v-badge">v5.8</span>
                <h2 class="v-title">UI & Compatibility</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-ui">Dashboard Layout</div>
                        <ul>
                            <li>
                                <strong>High-Density Grids</strong>
                                <span class="desc-text">Added new 4-column and 5-column dashboard display options to
                                    better utilize widescreen monitors for high camera counts.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-core">Engine</div>
                        <ul>
                            <li>
                                <strong>FFmpeg Logic Refinement</strong>
                                <span class="desc-text">Broadened compatibility for legacy RTSP encoders and improved
                                    version-checking routines during server startup.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.7 -->
            <div class="v-entry">
                <span class="v-badge">v5.7</span>
                <h2 class="v-title">Identity & Security Update</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-features">Major Feature</div>
                        <ul>
                            <li>
                                <strong>Camera UUID Control</strong>
                                <span class="desc-text">Enhanced camera identification with customizable UUIDs. Users
                                    can now manually edit or regenerate unique Camera UUIDs, providing a definitive fix
                                    for device collisions in NVRs like UniFi Protect that occasionally misidentify
                                    distinct cameras as the same device.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-core">Core</div>
                        <ul>
                            <li>
                                <strong>Stable Hardware Signatures</strong>
                                <span class="desc-text">ONVIF Serial Numbers and MAC addresses are now deterministically
                                    derived from the Camera UUID, ensuring consistent identity across server
                                    restarts.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.6.4 -->
            <div class="v-entry">
                <span class="v-badge">v5.6.4</span>
                <h2 class="v-title">Stability & Watchdog Update</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-core">Core Engine</div>
                        <ul>
                            <li>
                                <strong>Auto-Healing Watchdog</strong>
                                <span class="desc-text">New reactive system monitors stream bitrates. Automatically
                                    triggers MediaMTX restarts if a "zombie" stream (Ready but 0 Mbps) is detected for
                                    >120s.</span>
                            </li>
                            <li>
                                <strong>Socket Timeout Enforcement</strong>
                                <span class="desc-text">Hardened ingestion with `-stimeout 10s`. Forces FFmpeg to exit
                                    if a connection hangs, preventing runaway processes.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-features">Optimization</div>
                        <ul>
                            <li>
                                <strong>Write Queue Expansion</strong>
                                <span class="desc-text">Increased `writeQueueSize` from 16k to 32k. Provides essential
                                    headroom for high-camera density (32+) and 4K stream bursts.</span>
                            </li>
                            <li>
                                <strong>TCP Only Ingestion</strong>
                                <span class="desc-text">Disabled UDP for ingestion paths by default to eliminate packet
                                    fragmentation and "stale reader" warnings in Unifi Protect.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.6.3 -->
            <div class="v-entry">
                <span class="v-badge">v5.6.3</span>
                <h2 class="v-title">The GridFusion HUD</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-ui">UI / UX</div>
                        <ul>
                            <li>
                                <strong>Real-time Debug Overlay</strong>
                                <span class="desc-text">Semi-transparent, high-contrast HUD on the GridFusion canvas.
                                    Tracks encoding speed (e.g., 1.01x), resolution, and target FPS.</span>
                            </li>
                            <li>
                                <strong>Slate & Sky Theme</strong>
                                <span class="desc-text">Refined debug UI with high-readability colors that stand out
                                    over complex moving video scenes.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-core">Internal Logs</div>
                        <ul>
                            <li>
                                <strong>Log Suppression System</strong>
                                <span class="desc-text">FFmpeg terminal output is now suppressed by default. Repetitive
                                    status updates are buffered and piped only to the HUD to keep the console
                                    clean.</span>
                            </li>
                            <li>
                                <strong>Fast Tail Buffer</strong>
                                <span class="desc-text">Implemented 100-line thread-safe log buffer in MediaMTX manager
                                    for on-demand technical review.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.6.1 -->
            <div class="v-entry">
                <span class="v-badge">v5.6.1</span>
                <h2 class="v-title">Dependency & Startup Fix</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-fixes">Bug Fixes</div>
                        <ul>
                            <li>
                                <strong>GridFusion Startup Stutter</strong>
                                <span class="desc-text">Reverted experimental probesize/analyzeduration flags that were
                                    causing "stutter" cycles during the first 10 seconds of stream ingestion.</span>
                            </li>
                            <li>
                                <strong>Ubuntu 25 Setup Fix</strong>
                                <span class="desc-text">Updated `start_ubuntu_25.sh` to handle strict directory
                                    permissions encountered on newer Ubuntu kernels.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-core">Core Components</div>
                        <ul>
                            <li>
                                <strong>MediaMTX Core v1.15.6</strong>
                                <span class="desc-text">Updated the streaming engine to the latest stable release for
                                    improved HLS memory management.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.5.4 -->
            <div class="v-entry">
                <span class="v-badge">v5.5.4</span>
                <h2 class="v-title">Visual Branding Refresh</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-ui">Visuals</div>
                        <ul>
                            <li>
                                <strong>Modern Professional Header</strong>
                                <span class="desc-text">Replaced legacy text blocks with a persistent, sleek header
                                    layout across all pages. Added versioning as a badge.</span>
                            </li>
                            <li>
                                <strong>JetBrains Mono Integration</strong>
                                <span class="desc-text">Standardized technical font for all code blocks and RTSP URL
                                    displays for better pixel clarity.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.3.7 -->
            <div class="v-entry">
                <span class="v-badge">v5.3.7</span>
                <h2 class="v-title">Connectivity & Security</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-core">Web Security</div>
                        <ul>
                            <li>
                                <strong>Secure Context Fallback</strong>
                                <span class="desc-text">Implemented a legacy `execCommand` fallback for "Copy to
                                    Clipboard" to support users accessing the server over non-HTTPS local IPs.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-features">Media Features</div>
                        <ul>
                            <li>
                                <strong>WebRTC Low Latency</strong>
                                <span class="desc-text">Added specific MediaMTX signaling to enable sub-500ms latency
                                    for browser viewing of camera feeds.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.3.0 -->
            <div class="v-entry">
                <span class="v-badge">v5.3.0</span>
                <h2 class="v-title">Advanced Control Release</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-features">New UI</div>
                        <ul>
                            <li>
                                <strong>Advanced Settings Panel</strong>
                                <span class="desc-text">A dedicated UI for technical users to manually override FFmpeg
                                    and MediaMTX engine flags.</span>
                            </li>
                            <li>
                                <strong>HW Acceleration Detection</strong>
                                <span class="desc-text">Automatic sensing for NVIDIA (NVENC) and AMD (AMF) graphics
                                    cards. Enables hardware-assisted encoding for the Matrix.</span>
                            </li>
                        </ul>
                    </div>
                    <div class="v-card">
                        <div class="cat-title cat-core">Performance</div>
                        <ul>
                            <li>
                                <strong>LL-HLS Enabled</strong>
                                <span class="desc-text">Configured Low-Latency HLS with 1s segments and fMP4 fragments.
                                    Drastically reduces delay when viewing on standard mobile phones.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- v5.0.0 -->
            <div class="v-entry">
                <span class="v-badge">v5.0.0</span>
                <h2 class="v-title">The GridFusion Launch</h2>
                <div class="v-grid">
                    <div class="v-card">
                        <div class="cat-title cat-features">Major Feature</div>
                        <ul>
                            <li>
                                <strong>Visual Matrix Composer</strong>
                                <span class="desc-text">Complete drag-and-drop system for creating multi-camera views.
                                    Includes grid snapping, preset layouts, and custom naming.</span>
                            </li>
                            <li>
                                <strong>Server-Side Snapshotting</strong>
                                <span class="desc-text">Implemented a frame-grabber that pulls images from the local
                                    server to avoid stressing the physical cameras during editing.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>

        <footer>
            &copy; 2026 Development Log - Local Reference Use Only.
        </footer>
    </div>

</body>

</html>